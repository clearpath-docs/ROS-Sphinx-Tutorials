



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Drive a Husky &mdash; ROS Tutorials 0.5.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/clearpath.css" type="text/css" />
  

  
    <link rel="top" title="ROS Tutorials 0.5.1 documentation" href="index.html"/>
        <link rel="next" title="Drive a Grizzly" href="Drive a Grizzly.html"/>
        <link rel="prev" title="Practical Example" href="Practical Example.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Start of clearpathrobotics Zendesk Widget script -->
<script>/*<![CDATA[​*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","clearpathrobotics.zendesk.com");/*​]]>*/</script>
<!-- End of clearpathrobotics Zendesk Widget script -->

<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-71565737-1', 'auto');
 ga('send', 'pageview');

</script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ROS Tutorials
          
          </a>
          
            
            <a href="http://www.clearpathrobotics.com/">
            <img src="_static/clearpathlogo.png" class="logo" />
          </a>
          
          

          
            
            
              <div class="version">
                0.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="simple">
</ul>
<p class="caption"><span class="caption-text">Beginner</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Getting Started with Ubuntu.html">ROS 101: Getting Started with Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="Intro to the Robot Operating System.html">ROS 101: Intro to ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Practical Example.html">ROS 101: A Practical Example</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">ROS 101: Drive a Husky</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#updating-the-virtual-machine">Updating the Virtual Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-virtual-husky">Running a Virtual Husky</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-rqt-graph">Using rqt_graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-tf">Using tf</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Drive a Grizzly.html">ROS 101: Drive a Grizzly</a></li>
</ul>
<p class="caption"><span class="caption-text">Intermediate</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Creating publisher.html">Creating a Workspace and Publisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="Creating subscriber.html">Creating a Subscriber Using Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="Creating RQT Dashboard.html">Creating a RQT Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="Launch Files.html">Launch Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Udev Rules.html">Udev Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="Driving Husky with ROSSerial.html">Driving Husky with ROSSerial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROS Parameter Server.html">ROS Parameter Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROS Navigation Basics.html">ROS Navigation Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Converting ROS bag to CSV.html">Converting ROS Bag to CSV</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nodelet Everything.html">Nodelet Everything</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ROS Tutorials</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
     
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="http://support.clearpathrobotics.com">Home</a> &raquo;</li>
      
    <li>Drive a Husky</li>
      <li class="wy-breadcrumbs-aside">
        <div class="roslogo">
      </div>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="drive-a-husky">
<h1>Drive a Husky<a class="headerlink" href="#drive-a-husky" title="Permalink to this headline">¶</a></h1>
<div class="section" id="updating-the-virtual-machine">
<h2>Updating the Virtual Machine<a class="headerlink" href="#updating-the-virtual-machine" title="Permalink to this headline">¶</a></h2>
<p>Open a terminal window (Ctrl + Alt + T), and enter the following:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get update
sudo apt-get install ros-indigo-husky-desktop
sudo apt-get install ros-indigo-husky-simulator
</pre></div>
</div>
</div>
<div class="section" id="running-a-virtual-husky">
<h2>Running a Virtual Husky<a class="headerlink" href="#running-a-virtual-husky" title="Permalink to this headline">¶</a></h2>
<p>Open a terminal window, and enter:</p>
<div class="highlight-python"><div class="highlight"><pre>roslaunch husky_gazebo husky_empty_world.launch
</pre></div>
</div>
<p>Open another terminal window, and enter:</p>
<div class="highlight-python"><div class="highlight"><pre>roslaunch husky_viz view_robot.launch
</pre></div>
</div>
<p>You should be given two windows, both showing a yellow, rugged robot (Husky!)</p>
<p><strong>RViz</strong></p>
<a class="reference internal image-reference" href="_images/Huskyviz.png"><img alt="_images/Huskyviz.png" src="_images/Huskyviz.png" style="width: 768.5px; height: 452.5px;" /></a>
<p><strong>Gazebo</strong></p>
<a class="reference internal image-reference" href="_images/Huskysim.png"><img alt="_images/Huskysim.png" src="_images/Huskysim.png" style="width: 767.0px; height: 398.5px;" /></a>
<p>The left one shown is Gazebo. This is where we get a realistic simulation of our robot, including wheel slippage, skidding, and inertia.
We can add objects to this simulation, such as the cube above, or even entire maps of real places.</p>
<p>The right window is RViz. This tool allows us to see sensor data from a robot, and give it commands (in a future post).</p>
<p>We can now command the robot to go forwards. Open a terminal window, and copy the following:</p>
<div class="highlight-python"><div class="highlight"><pre>rostopic pub /husky_velocity_controller/cmd_vel geometry_msgs/Twist &quot;linear:
        x: 0.5
        y: 0.0
        z: 0.0
angular:
        x: 0.0
        y: 0.0
        z: 0.0&quot; -r 10
</pre></div>
</div>
<p>In the above command, we publish to the <strong>/husky_velocity_controller/cmd_vel topic</strong>, of topic type <strong>geometry_msgs/Twist</strong>.
The data we publish tells the simulated Husky to go forwards at 0.5m/s, without any rotation. You should see your Husky move forwards.
In the gazebo window, you might notice simulated wheel slip, and skidding.</p>
</div>
<div class="section" id="using-rqt-graph">
<h2>Using rqt_graph<a class="headerlink" href="#using-rqt-graph" title="Permalink to this headline">¶</a></h2>
<p>We can also see the structure of how topics are passed around the system. Leave the publishing window running, and open a terminal window. Type in:</p>
<div class="highlight-python"><div class="highlight"><pre>rosrun rqt_graph rqt_graph
</pre></div>
</div>
<p>This command generates a representation of how the nodes and topics running on the current ROS Master are related. You should get something similar to the following:</p>
<img alt="_images/rqtgraph.png" src="_images/rqtgraph.png" />
<p>The highlighted node and arrow show the topic that you are publishing to the simulated Husky. This Husky then goes on to update the gazebo virtual environment,
which takes care of movement of the joints (wheels) and the physics of the robot.
The rqt_graph command is very handy to use, when you are unsure who is publishing to what in ROS.
Once you figure out what topic you are interested in, you can see the content of the topic using <strong>rostopic echo</strong>.</p>
</div>
<div class="section" id="using-tf">
<h2>Using tf<a class="headerlink" href="#using-tf" title="Permalink to this headline">¶</a></h2>
<p>In ROS, tf is a special topic that keeps track of coordinate frames, and how they relate to each other.
So, our simulated Husky starts at (0,0,0) in the world coordinate frame. When the Husky moves, it’s own coordinate frame changes.
Each wheel has a coordinate frame that tracks how it is rotating, and where it is. Generally, anything on the robot that is not fixed in space, will have a tf describing it.
In the <strong>rqt_graph section</strong>, you can see that the <strong>/tf topic</strong> is published to and subscribed from by many different nodes.</p>
<p>One intuitive way to see how the tf topic is structured for a robot is to use the <strong>view_frames</strong> tool provided by ROS. Open a terminal window. Type in:</p>
<div class="highlight-python"><div class="highlight"><pre>rosrun tf view_frames
</pre></div>
</div>
<p>Wait for this to complete, and then type in:</p>
<div class="highlight-python"><div class="highlight"><pre>evince frames.pdf
</pre></div>
</div>
<p>This will bring up something similar to the following image.</p>
<img alt="_images/tfframes.png" src="_images/tfframes.png" />
<p>Here we can see that all four wheel are referenced to the <strong>base_link</strong>. We also see that the <strong>odom topic</strong> is driving the reference of the whole robot.
This means that if you write to the <strong>odom topic</strong> (IE, when you publish to the <strong>/cmd_vel topic</strong>) then the whole robot will move.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Drive a Grizzly.html" class="btn btn-neutral float-right" title="Drive a Grizzly" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Practical Example.html" class="btn btn-neutral" title="Practical Example" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Clearpath Robotics.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>