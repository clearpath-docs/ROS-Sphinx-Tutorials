



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ROS Navigation Basics &mdash; ROS Tutorials 0.5.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/clearpath.css" type="text/css" />
  

  
    <link rel="top" title="ROS Tutorials 0.5.1 documentation" href="index.html"/>
        <link rel="next" title="Converting ROS Bag to CSV" href="Converting ROS bag to CSV.html"/>
        <link rel="prev" title="ROS Parameter Server" href="ROS Parameter Server.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Start of clearpathrobotics Zendesk Widget script -->
<script>/*<![CDATA[​*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","clearpathrobotics.zendesk.com");/*​]]>*/</script>
<!-- End of clearpathrobotics Zendesk Widget script -->

<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

 ga('create', 'UA-71565737-1', 'auto');
 ga('send', 'pageview');

</script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ROS Tutorials
          
          </a>
          
            
            <a href="http://www.clearpathrobotics.com/">
            <img src="_static/clearpathlogo.png" class="logo" />
          </a>
          
          

          
            
            
              <div class="version">
                0.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="simple">
</ul>
<p class="caption"><span class="caption-text">Beginner</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Getting Started with Ubuntu.html">ROS 101: Getting Started with Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="Intro to the Robot Operating System.html">ROS 101: Intro to ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Practical Example.html">ROS 101: A Practical Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="Drive a Husky.html">ROS 101: Drive a Husky</a></li>
<li class="toctree-l1"><a class="reference internal" href="Drive a Grizzly.html">ROS 101: Drive a Grizzly</a></li>
</ul>
<p class="caption"><span class="caption-text">Intermediate</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Creating publisher.html">Creating a Workspace and Publisher</a></li>
<li class="toctree-l1"><a class="reference internal" href="Creating subscriber.html">Creating a Subscriber Using Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="Creating RQT Dashboard.html">Creating a RQT Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="Launch Files.html">Launch Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="Udev Rules.html">Udev Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="Driving Husky with ROSSerial.html">Driving Husky with ROSSerial</a></li>
<li class="toctree-l1"><a class="reference internal" href="ROS Parameter Server.html">ROS Parameter Server</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">ROS Navigation Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mapping">Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="#localization">Localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customization">Customization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Converting ROS bag to CSV.html">Converting ROS Bag to CSV</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Nodelet Everything.html">Nodelet Everything</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ROS Tutorials</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
     
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="http://support.clearpathrobotics.com">Home</a> &raquo;</li>
      
    <li>ROS Navigation Basics</li>
      <li class="wy-breadcrumbs-aside">
        <div class="roslogo">
      </div>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ros-navigation-basics">
<h1>ROS Navigation Basics<a class="headerlink" href="#ros-navigation-basics" title="Permalink to this headline">¶</a></h1>
<p>If you&#8217;ve worked with ROS and robotics, you&#8217;ve probably heard of gmaping, localization, SLAM, costmaps and paths, but what does all this mean? They are more than just robot buzz words; these allow a robot to get from one point to another without bumping into obstacles, and in this tutorial, we&#8217;ll be covering some of the key concepts in what makes up an autonomous robot.</p>
<p>For this tutorial, we&#8217;ll be using Clearpath&#8217;s Jackal simulation in ROS Indigo. If you&#8217;ve never used ROS before, or don&#8217;t have ROS Indigo installed on your machine, check out the <a class="reference external" href="http://wiki.ros.org/indigo">ROS wiki</a> to get started.</p>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>We&#8217;ll begin by installing Clearpath&#8217;s Jackal simulation, desktop, and navigation packages.</p>
<div class="highlight-bash"><div class="highlight"><pre>sudo apt-get install ros-indigo-jackal-simulator ros-indigo-jackal-desktop
</pre></div>
</div>
<p>In addition, we&#8217;ll need the Jackal navigation package, but instead of installing the debians packages with apt-get, we&#8217;ll create a sourced workspace so we can make changes to some of these files and see how it effects our simulation. For a full explanation on creating and compiling a sourced workspace, check out our <a class="reference external" href="http://www.clearpathrobotics.com/guides/ros/Creating%20publisher.html">Creating a Workspace &amp; Package</a> tutorial, but for the purpose of this tutorial, here is a series of commands that&#8217;ll clone the jackal_navigation package (and a few others) into a sourced workspace.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> ~
mkdir -p jackal_navigation/src
<span class="nb">cd </span>jackal_navigation/src <span class="o">&amp;&amp;</span> catkin_init_workspace
git clone https://github.com/jackal/jackal.git
git clone https://github.com/jackal/jackal_simulator.git
git clone https://github.com/clearpathrobotics/LMS1xx.git
git clone https://github.com/ros-drivers/pointgrey_camera_driver.git
<span class="nb">cd</span> ..
catkin_make
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/workspaceSetup.png"><img alt="_images/workspaceSetup.png" src="_images/workspaceSetup.png" style="width: 1397.25px; height: 792.0px;" /></a>
<p>The <strong>Jackal_navigation</strong> package simply contains configuration files in the params directory, and launch files to load these parameters and launch certain packages in the ROS navigation stack. The navigation stack is where the real magic happens when it comes to navigating with a ROS robot. Let&#8217;s begin by launching our Jackal simulation with a simulated laser.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">source</span> ~/jackal_navigation/devel/setup.bash
roslaunch jackal_gazebo jackal_world.launch config:<span class="o">=</span>front_laser
</pre></div>
</div>
<p>When you can&#8217;t use a real Jackal, Gazebo is the next best thing! This simulation provides us with odometry and scan data, which is all we need to get Jackal driving around on it&#8217;s own! <strong>In a new terminal</strong>, source your jackal_navigation workspace and launch odom_navigation_demo.launch.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">source</span> ~/jackal_navigation/devel/setup.bash
roslaunch jackal_navigation odom_navigation_demo.launch
</pre></div>
</div>
<p>This launch file launches the <a class="reference external" href="http://wiki.ros.org/move_base">move_base</a> package. <strong>move_base</strong> allows Jackal to try to reach a goal simply with laser and odometry data.</p>
<p>We&#8217;ll begin our navigation tutorial by first building a map of our Gazebo world using the <strong>gmapping.launch</strong> file in the Jackal navigation package <strong>in another terminal</strong>, remember to source your workspace!</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">source</span> ~/jackal_navigation/devel/setup.bash
roslaunch jackal_navigation gmapping.launch
</pre></div>
</div>
<p>If you&#8217;re familiar with ROS launch files, I&#8217;d encourage you to take a look <a class="reference external" href="https://github.com/jackal/jackal/blob/indigo-devel/jackal_navigation/launch/include/gmapping.launch">here</a>, otherwise, you can check out our tutorial on launch files <a class="reference external" href="http://www.clearpathrobotics.com/guides/ros/Launch%20Files.html">here</a>. This launch file is simply starting the <a class="reference external" href="http://wiki.ros.org/gmapping">gmaping package</a> and setting several of the gmapping parameters which are described on the <a class="reference external" href="http://wiki.ros.org/gmapping">gmapping ROS wiki</a> page. <strong>In a new terminal</strong>, open up Rviz using the Jackal&#8217;s gmaping configuration.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">source</span> ~/jackal_navigation/devel/setup.bash
roslaunch jackal_viz view_robot.launch config:<span class="o">=</span>gmapping
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/gmappingconfig.png"><img alt="_images/gmappingconfig.png" src="_images/gmappingconfig.png" style="width: 1397.25px; height: 792.0px;" /></a>
<p>Take a look around and get familiar with all the different displays on the left side of the window. Notice there are two maps. One is visualizing the <strong>/map</strong> topic, which is what is being built from the gmapping demo as the robot moves around.  If you click the check box beside the other map, you can now see the costmap from <strong>/move_base/global_costmap/costmap</strong>. The costmap is responsible for the inflation around obstacles to account for the footprint of the robot; the larger the inflation radius, the further the robot will keep away from these obstacles.</p>
<p>Before we start mapping, let&#8217;s add another view to our Rviz visualization.  Click <strong>Add</strong> in the bottom left, and look for <strong>/move_base/NavfnROS/plan</strong> and click <strong>Path</strong>. This lets us see what Jackal is thinking!  It&#8217;ll show you the path Jackal is going to attempt to use to reach its goal, and you&#8217;ll be able to see it change in real time.</p>
</div>
<div class="section" id="mapping">
<h2>Mapping<a class="headerlink" href="#mapping" title="Permalink to this headline">¶</a></h2>
<p>Now it&#8217;s time to start mapping! Using the tool bar on the top of the Rviz window, send 2D Nav Goals to Jackal. As it drives around, more of the map will be discovered. Also notice the path and how it changes as Jackal finds obstacles.</p>
<a class="reference internal image-reference" href="_images/jackalsavedmap.png"><img alt="_images/jackalsavedmap.png" src="_images/jackalsavedmap.png" style="width: 1397.25px; height: 792.0px;" /></a>
</div>
<div class="section" id="localization">
<h2>Localization<a class="headerlink" href="#localization" title="Permalink to this headline">¶</a></h2>
<p>Once you&#8217;re happy with the map you&#8217;ve made, go ahead and save it using</p>
<div class="highlight-bash"><div class="highlight"><pre>rosrun map_server map_saver -f jackal_world
</pre></div>
</div>
<p>This will create a map file in your current directory called <strong>jackal_world</strong>, which we will use in our <a class="reference external" href="http://wiki.ros.org/amcl">AMCL</a> demo. Go ahead and terminate all of the ROS terminals using CTRL-C. Then launch the simulator once again, the AMCL demo with the map we just created, and Rviz with our localization config, <strong>all in separate terminals</strong>. If you closed the windows, you&#8217;ll need to source your terminals again.</p>
<div class="highlight-bash"><div class="highlight"><pre>roslaunch jackal_gazebo jackal_world.launch config:<span class="o">=</span>front_laser
roslaunch jackal_navigation amcl_demo.launch map_file:<span class="o">=</span>jackal_world.yaml
roslaunch jackal_viz view_robot.launch config:<span class="o">=</span>localization
</pre></div>
</div>
<p>For the purpose of this demonstration, I recommend hiding the Robot Model and Axes, and showing the Pose Array using the check boxes on the side. The red arrows around Jackal are the poses Jackal could be, based on a Monte Carlo localization estimate. This takes in scan data and transforms, and evaluates that data against the map we recorded previously to try to determine where it is within the Jackal world.</p>
<a class="reference internal image-reference" href="_images/jackalposearray.png"><img alt="_images/jackalposearray.png" src="_images/jackalposearray.png" style="width: 1397.25px; height: 792.0px;" /></a>
<p>If you give Jackal a 2D nav goal, you can see how the pose array gets much more refined, as the system takes in more information about its surrounding, and rules out possible poses.</p>
<a class="reference internal image-reference" href="_images/smallposearray.png"><img alt="_images/smallposearray.png" src="_images/smallposearray.png" style="width: 1397.25px; height: 792.0px;" /></a>
<p>Another important tool is the 2D pose estimate. You can assist Jackal in localization by giving it a rough idea of where it should be in the map. You&#8217;ll notice that the pose array will get populated in the general area of a 2D pose estimate, and once again gets refined as it eliminates poses.</p>
</div>
<div class="section" id="customization">
<h2>Customization<a class="headerlink" href="#customization" title="Permalink to this headline">¶</a></h2>
<p>Now that&#8217;s we&#8217;ve covered some of the basics, let&#8217;s bring in a fully loaded Jackal to play with.</p>
<p>There is a <strong>custom_example.urdf</strong> file in the urdf folder. I&#8217;d encourage you to check out this file for yourself, and see if you can tell what sensors are being added to Jackal and where!</p>
<p>Once you&#8217;re ready to actually launch this suped-up Jackal, set the <strong>JACKAL_URDF_EXTRAS</strong> parameter to the file path to this <strong>custome_example.urdf</strong> file.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">export </span><span class="nv">JACKAL_URDF_EXTRAS</span><span class="o">=</span>~/jackal_navigation/src/jackal/jackal_description/urdf/custom_example.urdf
</pre></div>
</div>
<p>From there, source your terminal and simply launch the Jackal simulation as you normally would.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">source</span> ~/jackal_navigation/devel/setup.bash
roslauch jackal_gazebo jackal_world.launch
</pre></div>
</div>
<p>You should now see a fully loaded Jackal! There are 2 bumblebee cameras angled downwards on the front and the back, 2 LIDARS scanning forwards and backwards, and there is a pointgrey camera giving us an image directly in front of Jackal.</p>
<p>From here, you can open up any of the demos we used earlier, or go straight into Rviz to visualize our new sensors.</p>
<div class="highlight-bash"><div class="highlight"><pre>roslauch jackal_viz view_robot.launch
</pre></div>
</div>
<p>At this point, I invite you to play around with these new sensors and try adding them into Rviz so you can see the different images from the cameras.</p>
<a class="reference internal image-reference" href="_images/jackalfullyloaded.png"><img alt="_images/jackalfullyloaded.png" src="_images/jackalfullyloaded.png" style="width: 1159.5px; height: 652.5px;" /></a>
<p>If you really want to get adventurous, try changing some of the navigation parameters in the <strong>jackal_navigation</strong> launch files. You could also try mapping different Gazebo worlds using the many that are available online, or even making your own!</p>
<p>This tutorial merely scratched the surface of the ROS navigation packages, but I hope this helped you understand some of the basics concepts, and get you started exploring ROS navigation for yourself!</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Converting ROS bag to CSV.html" class="btn btn-neutral float-right" title="Converting ROS Bag to CSV" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ROS Parameter Server.html" class="btn btn-neutral" title="ROS Parameter Server" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Clearpath Robotics.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.5.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>